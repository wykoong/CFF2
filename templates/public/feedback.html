<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Submit Feedback</title>
    <style>
        .form-group { margin-bottom: 1rem; }
        .error { color: red; }
        .success { color: green; }
        .hidden { display: none; }
        button:disabled { opacity: 0.5; }
    </style>
</head>
<body>
    <h1>Submit Feedback</h1>
    <div id="status" class="hidden"></div>
    
    <form id="feedback-form">
        <div class="form-group">
            <label for="email">Email:</label><br>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
            <label for="phone">Phone (optional):</label><br>
            <input type="tel" id="phone" name="phone">
        </div>
        <div class="form-group">
            <label for="message">Message:</label><br>
            <textarea id="message" name="message" rows="4" required></textarea>
        </div>
        <button type="submit">Submit Feedback</button>
    </form>

    <script>
        const form = document.getElementById('feedback-form');
        const status = document.getElementById('status');
        
        function showStatus(message, isError = false) {
            status.textContent = message;
            status.className = isError ? 'error' : 'success';
            status.style.display = 'block';
            setTimeout(() => status.style.display = 'none', 5000);
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = form.querySelector('button');
            submitButton.disabled = true;
            
            try {
                const response = await fetch('/api/feedback', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: document.getElementById('email').value,
                        phone: document.getElementById('phone').value,
                        message: document.getElementById('message').value
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showStatus('Feedback submitted successfully!');
                    form.reset();
                } else {
                    showStatus(data.error || 'Error submitting feedback', true);
                }
            } catch (err) {
                showStatus('Network error submitting feedback', true);
            } finally {
                submitButton.disabled = false;
            }
        });
    </script>
</body>
</html>